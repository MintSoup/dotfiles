# Hyprland Configuration
# Based on AwesomeWM config

# Monitor configuration
monitor=,preferred,auto,1.25

# Environment variables
# env = XCURSOR_SIZE,24
env = TERMINAL,foot

# Startup applications
exec-once = brave
exec-once = discord
exec-once = flameshot
exec-once = copyq
# exec-once = xbindkeys
# exec-once = numlockx on
exec-once = emacs --daemon
exec-once = waybar
exec-once = hyprpaper
# exec-once = unclutter --timeout 30

# Input configuration
input {
	kb_layout = us,am
	kb_variant = ,phonetic-alt
	kb_options = grp:alt_shift_toggle

	follow_mouse = 1
	
	touchpad {
		natural_scroll = true
	}

	sensitivity = 0
	repeat_rate = 40
	repeat_delay = 200
}

# General settings
general {
	gaps_in = 1.5
	gaps_out = 3
	border_size = 2
	col.active_border = rgba(c678ddff)
	col.inactive_border = rgba(00000000)
	
	layout = master

}

# Decoration
decoration {
	rounding = 0
	blur {
		enabled = true
		size = 7
		passes = 2
		noise = 0
	}

	layerrule = blur,waybar


	shadow {
		range = 300 
		render_power = 4
		color = rgba(1a1a1aaf)
		offset = 0 40
		scale = 0.2
	}

}

# Animations
animations {
	enabled = true

	animation = windows, 1, 1.5, default
	animation = windowsOut, 1, 30, default, popin 60%
	animation = border, 1, 4, default
	animation = borderangle, 1, 8, default
	animation = fade, 1, 2, default
	animation = workspaces, 1, 3, default
}


master {
	mfact = 0.5
}

# Gestures
gestures {
	workspace_swipe = true
}

xwayland {
	force_zero_scaling = true
}


# Shadows only for floating windows
# windowrule = noshadow, floating:0


# Smart gaps
workspace = w[tv1], gapsout:0, gapsin:0
workspace = f[1], gapsout:0, gapsin:0
windowrulev2 = bordersize 0, floating:0, onworkspace:w[tv1]
windowrulev2 = rounding 0, floating:0, onworkspace:w[tv1]
windowrulev2 = bordersize 0, floating:0, onworkspace:f[1]
windowrulev2 = rounding 0, floating:0, onworkspace:f[1]



# Window rules
windowrule = workspace 5, class:Brave-browser
windowrule = workspace 6, class:Element
windowrule = opacity 0.85, class:emacs
windowrule = workspace 6, class:discord
# windowrule = float, ^(Pavucontrol)$
# windowrule = float, ^(SpeedCrunch)$
windowrule = float, class:Copyq


# Key bindings
$mainMod = SUPER

# Basic bindings
bind = $mainMod, Return, exec, foot
bind = $mainMod, X, killactive
bind = $mainMod CTRL, R, exec, hyprctl reload
bind = $mainMod CTRL, M, fullscreen, 1
bind = $mainMod CTRL, Space, togglefloating
bind = $mainMod, O, movetoworkspace, +1

# Application launchers (from external.lua)
bind = $mainMod, Space, exec, ~/.config/rofi/launchers/type-3/launcher.sh
bind = $mainMod, semicolon, exec, rofi -show emoji
bind = $mainMod, C, exec, copyq show
bind = $mainMod SHIFT, E, exec, pcmanfm-qt
bind = $mainMod SHIFT, S, exec, flameshot gui
bind = $mainMod SHIFT, M, exec, $TERMINAL -e ncmpcpp
bind = $mainMod SHIFT, N, exec, $TERMINAL -e nmtui
bind = $mainMod SHIFT, V, exec, $TERMINAL -e nvim
bind = $mainMod SHIFT, B, exec, $TERMINAL -e htop
bind = $mainMod SHIFT, W, exec, emacsclient -c -a ""
bind = $mainMod SHIFT, D, exec, emacsclient -c -a "" -e '(find-file "~")'

# Focus movement (vim-like)
bind = $mainMod, J, cyclenext
bind = $mainMod, K, cyclenext, prev

# Window swapping
bind = $mainMod SHIFT, J, swapnext
bind = $mainMod SHIFT, K, swapnext, prev

# Master layout controls
bind = $mainMod, H, splitratio, -0.05
bind = $mainMod, L, splitratio, +0.05
# bind = $mainMod SHIFT, H, addmaster, 1
# bind = $mainMod SHIFT, L, addmaster, -1

# Individual window resize (equivalent to incwfact)
bind = $mainMod ALT, H, resizeactive, 50 0
bind = $mainMod ALT, L, resizeactive, -50 0

# Layout switching
bind = $mainMod, M, exec, hyprctl dispatch layoutmsg orientationcycle

# Urgent window (best equivalent)
bind = $mainMod, U, focusurgentorlast

# Workspace switching (numpad keys)
bind = $mainMod, KP_End, workspace, 1		 # Numpad 1
bind = $mainMod, KP_Down, workspace, 2		 # Numpad 2	 
bind = $mainMod, KP_Next, workspace, 3		 # Numpad 3
bind = $mainMod, KP_Left, workspace, 4		 # Numpad 4
bind = $mainMod, KP_Begin, workspace, 5		 # Numpad 5
bind = $mainMod, KP_Right, workspace, 6		 # Numpad 6
bind = $mainMod, KP_Home, workspace, 7		 # Numpad 7
bind = $mainMod, KP_Up, workspace, 8		 # Numpad 8
bind = $mainMod, KP_Prior, workspace, 9		 # Numpad 9

# Move window to workspace
bind = $mainMod SHIFT, KP_End, movetoworkspacesilent, 1
bind = $mainMod SHIFT, KP_Down, movetoworkspacesilent, 2
bind = $mainMod SHIFT, KP_Next, movetoworkspacesilent, 3
bind = $mainMod SHIFT, KP_Left, movetoworkspacesilent, 4
bind = $mainMod SHIFT, KP_Begin, movetoworkspacesilent, 5
bind = $mainMod SHIFT, KP_Right, movetoworkspacesilent, 6
bind = $mainMod SHIFT, KP_Home, movetoworkspacesilent, 7
bind = $mainMod SHIFT, KP_Up, movetoworkspacesilent, 8
bind = $mainMod SHIFT, KP_Prior, movetoworkspacesilent, 9

# Toggle workspace (Control + numpad)
bind = $mainMod CTRL, KP_End, togglespecialworkspace, 1
bind = $mainMod CTRL, KP_Down, togglespecialworkspace, 2
bind = $mainMod CTRL, KP_Next, togglespecialworkspace, 3
bind = $mainMod CTRL, KP_Left, togglespecialworkspace, 4
bind = $mainMod CTRL, KP_Begin, togglespecialworkspace, 5
bind = $mainMod CTRL, KP_Right, togglespecialworkspace, 6
bind = $mainMod CTRL, KP_Home, togglespecialworkspace, 7
bind = $mainMod CTRL, KP_Up, togglespecialworkspace, 8
bind = $mainMod CTRL, KP_Prior, togglespecialworkspace, 9

# Media keys
binde = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%+
binde = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 2%-
bind = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bind = $mainMod, XF86AudioRaiseVolume, exec, mpc volume +2
bind = $mainMod, XF86AudioLowerVolume, exec, mpc volume -2

# Brightness controls
bind = , XF86MonBrightnessUp, exec, brightnessctl set +10%
bind = , XF86MonBrightnessDown, exec, brightnessctl set 10%-
bind = $mainMod CTRL, L, exec, sleep 0.08 && hyprctl dispatch dpms off

# Keyboard brightness
bind = , XF86KbdBrightnessUp, exec, echo + > /run/kbdbacklight
bind = , XF86KbdBrightnessDown, exec, echo - > /run/kbdbacklight

# Power controls
bind = , XF86PowerOff, exec, ~/.config/rofi/powermenu/type-4/powermenu.sh
bind = , XF86TouchpadToggle, exec, toggletpad
bind = , XF86Launch1, exec, speedcrunch
bind = , XF86Sleep, exec, hyprlock

# Waybar toggle
bind = $mainMod, B, exec, killall -SIGUSR2 waybar

# Mouse bindings
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
bind = $mainMod, mouse:274, togglefloating